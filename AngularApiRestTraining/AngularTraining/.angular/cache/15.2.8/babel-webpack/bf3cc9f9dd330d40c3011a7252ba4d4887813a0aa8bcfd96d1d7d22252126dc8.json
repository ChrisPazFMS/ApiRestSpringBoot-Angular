{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { Training } from 'src/app/models/training';\nlet TrainingsComponent = class TrainingsComponent {\n  constructor(trainingService) {\n    this.trainingService = trainingService;\n    this.trainings = [];\n    this.training = new Training();\n  }\n  ngOnInit() {\n    this.showTrainings();\n  }\n  showTrainings() {\n    this.trainingService.getTrainings().subscribe({\n      next: data => {\n        this.trainings = data;\n      },\n      error: error => {\n        this.error = \"Une erreur s'est produite lors du chargement des articles. /n\" + error;\n      }\n    });\n  }\n  onFileChange(event) {\n    const file = event.target.files[0];\n    this.training.imagePath = file;\n  }\n  saveTraining() {\n    this.trainingService.postTraining(this.training).subscribe({\n      next: () => {\n        console.log('Formation enregistrée avec succès');\n        this.showTrainings();\n        // Réinitialiser les champs\n        this.resetForm();\n      },\n      error: error => {\n        this.error = \"Erreur lors de l'enregistrement de la formation. \\n\" + error;\n      }\n    });\n  }\n  /**\r\n   * Réinitialiser les champs du formulaire de création de cour.\r\n   */\n  resetForm() {\n    this.resetFormSave.reset();\n  }\n};\n__decorate([ViewChild('resetFormSave', {\n  static: false\n})], TrainingsComponent.prototype, \"resetFormSave\", void 0);\nTrainingsComponent = __decorate([Component({\n  selector: 'app-trainings',\n  templateUrl: './trainings.component.html',\n  styleUrls: ['./trainings.component.css']\n})], TrainingsComponent);\nexport { TrainingsComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,EAAUC,SAAS,QAAQ,eAAe;AAC5D,SAASC,QAAQ,QAAQ,yBAAyB;AAQ3C,IAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAM7BC,YAAoBC,eAAgC;IAAhC,oBAAe,GAAfA,eAAe;IAJnC,cAAS,GAAe,EAAE;IAC1B,aAAQ,GAAa,IAAIH,QAAQ,EAAE;EAGoB;EAEvDI,QAAQ;IACN,IAAI,CAACC,aAAa,EAAE;EACtB;EAEAA,aAAa;IACX,IAAI,CAACF,eAAe,CAACG,YAAY,EAAE,CAACC,SAAS,CAAC;MAC5CC,IAAI,EAAGC,IAAgB,IAAI;QACzB,IAAI,CAACC,SAAS,GAAGD,IAAI;MACvB,CAAC;MACDE,KAAK,EAAGA,KAAK,IAAI;QACf,IAAI,CAACA,KAAK,GACR,+DAA+D,GAC/DA,KAAK;MACT;KACD,CAAC;EACJ;EAEAC,YAAY,CAACC,KAAU;IACrB,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAClC,IAAI,CAACC,QAAQ,CAACC,SAAS,GAAGJ,IAAI;EAChC;EAEAK,YAAY;IACV,IAAI,CAAChB,eAAe,CAACiB,YAAY,CAAC,IAAI,CAACH,QAAQ,CAAC,CAACV,SAAS,CAAC;MACzDC,IAAI,EAAE,MAAK;QACTa,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC;QAChD,IAAI,CAACjB,aAAa,EAAE;QACpB;QACA,IAAI,CAACkB,SAAS,EAAE;MAClB,CAAC;MACDZ,KAAK,EAAGA,KAAa,IAAI;QACvB,IAAI,CAACA,KAAK,GACR,qDAAqD,GAAGA,KAAK;MACjE;KACD,CAAC;EACJ;EAEA;;;EAGAY,SAAS;IACP,IAAI,CAACC,aAAa,CAACC,KAAK,EAAE;EAC5B;CACD;AAlDgDC,YAA9C3B,SAAS,CAAC,eAAe,EAAE;EAAE4B,MAAM,EAAE;AAAK,CAAE,CAAC,yDAAoB;AADvD1B,kBAAkB,eAL9BH,SAAS,CAAC;EACT8B,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,GACW7B,kBAAkB,CAmD9B;SAnDYA,kBAAkB","names":["Component","ViewChild","Training","TrainingsComponent","constructor","trainingService","ngOnInit","showTrainings","getTrainings","subscribe","next","data","trainings","error","onFileChange","event","file","target","files","training","imagePath","saveTraining","postTraining","console","log","resetForm","resetFormSave","reset","__decorate","static","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\PazmanyC\\Desktop\\Api_Rest_Angular-&-SpringBoot\\ApiRestSpringBoot-Angular\\AngularApiRestTraining\\AngularTraining\\src\\app\\component\\trainings\\trainings.component.ts"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Training } from 'src/app/models/training';\nimport { TrainingService } from 'src/app/services/training/training.service';\n\n@Component({\n  selector: 'app-trainings',\n  templateUrl: './trainings.component.html',\n  styleUrls: ['./trainings.component.css'],\n})\nexport class TrainingsComponent implements OnInit {\n  @ViewChild('resetFormSave', { static: false }) resetFormSave: any;\n  trainings: Training[] = [];\n  training: Training = new Training();\n  error!: string;\n\n  constructor(private trainingService: TrainingService) {}\n\n  ngOnInit() {\n    this.showTrainings();\n  }\n\n  showTrainings(): void {\n    this.trainingService.getTrainings().subscribe({\n      next: (data: Training[]) => {\n        this.trainings = data;\n      },\n      error: (error) => {\n        this.error =\n          \"Une erreur s'est produite lors du chargement des articles. /n\" +\n          error;\n      },\n    });\n  }\n\n  onFileChange(event: any) {\n    const file = event.target.files[0];\n    this.training.imagePath = file;\n  }\n\n  saveTraining(): void {\n    this.trainingService.postTraining(this.training).subscribe({\n      next: () => {\n        console.log('Formation enregistrée avec succès');\n        this.showTrainings();\n        // Réinitialiser les champs\n        this.resetForm();\n      },\n      error: (error: string) => {\n        this.error =\n          \"Erreur lors de l'enregistrement de la formation. \\n\" + error;\n      },\n    });\n  }\n\n  /**\n   * Réinitialiser les champs du formulaire de création de cour.\n   */\n  resetForm(): void {\n    this.resetFormSave.reset();\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}