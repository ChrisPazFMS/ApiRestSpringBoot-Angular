{"ast":null,"code":"import { Training } from 'src/app/models/training';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/training/training.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = [\"resetFormSave\"];\nfunction TrainingsComponent_div_4_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 25);\n  }\n}\nfunction TrainingsComponent_div_4_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 26);\n  }\n  if (rf & 2) {\n    const training_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", \"http://localhost:8080/\" + (training_r3 == null ? null : training_r3.imagePath), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction TrainingsComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"div\", 18);\n    i0.ɵɵtemplate(2, TrainingsComponent_div_4_img_2_Template, 1, 0, \"img\", 19);\n    i0.ɵɵtemplate(3, TrainingsComponent_div_4_img_3_Template, 1, 1, \"img\", 20);\n    i0.ɵɵelementStart(4, \"div\", 21)(5, \"h5\", 22);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 23);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\", 23);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\", 23);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementStart(13, \"button\", 24);\n    i0.ɵɵtext(14, \"Ajouter\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const training_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.loading);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Language : \", training_r3.name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(training_r3.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Price: \", training_r3.price, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Quantity: \", training_r3.quantity, \"\");\n  }\n}\nfunction TrainingsComponent_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.error);\n  }\n}\nexport class TrainingsComponent {\n  constructor(trainingService) {\n    this.trainingService = trainingService;\n    this.trainings = [];\n    this.training = new Training();\n    this.loading = true;\n  }\n  ngOnInit() {\n    this.loadTrainings();\n  }\n  loadTrainings() {\n    this.trainingService.getTrainings().subscribe({\n      next: data => {\n        this.trainings = data;\n      },\n      error: error => {\n        this.error = \"Une erreur s'est produite lors du chargement des articles. /n\" + error;\n      }\n    });\n  }\n  onFileChange(event) {\n    const file = event.target.files[0];\n    this.training.imagePath = file;\n  }\n  saveTraining() {\n    this.trainingService.postTraining(this.training).subscribe({\n      next: () => {\n        console.log('Formation enregistrée avec succès');\n        // this.loadTrainings();\n        this.loading = false;\n        this.resetForm();\n        // Réinitialiser les champs\n      },\n\n      error: error => {\n        this.error = \"Erreur lors de l'enregistrement de la formation. \\n\" + error;\n        this.loading = false;\n      }\n    });\n  }\n  /**\r\n   * Réinitialiser les champs du formulaire de création de cour.\r\n   */\n  resetForm() {\n    this.resetFormSave.reset();\n  }\n}\nTrainingsComponent.ɵfac = function TrainingsComponent_Factory(t) {\n  return new (t || TrainingsComponent)(i0.ɵɵdirectiveInject(i1.TrainingService));\n};\nTrainingsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TrainingsComponent,\n  selectors: [[\"app-trainings\"]],\n  viewQuery: function TrainingsComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.resetFormSave = _t.first);\n    }\n  },\n  decls: 33,\n  vars: 6,\n  consts: [[1, \"container\"], [1, \"row\"], [\"class\", \"col-md-4\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"error-message\", 4, \"ngIf\"], [3, \"ngSubmit\"], [\"resetFormSave\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"name\", \"placeholder\", \"Nom\", \"name\", \"name\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"description\"], [\"id\", \"description\", \"placeholder\", \"Description\", \"name\", \"description\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"price\"], [\"type\", \"number\", \"id\", \"price\", \"placeholder\", \"Prix\", \"name\", \"price\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"quantity\"], [\"type\", \"number\", \"id\", \"quantity\", \"placeholder\", \"Quantit\\u00E9\", \"name\", \"quantity\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"file\", 3, \"change\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [1, \"col-md-4\"], [1, \"card\", \"mb-3\"], [\"src\", \"http://localhost:8080/loader.gif\", \"alt\", \"Loading...\", 4, \"ngIf\"], [\"alt\", \"Training Image\", 3, \"src\", 4, \"ngIf\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [1, \"btn\", \"btn-primary\", \"float-end\"], [\"src\", \"http://localhost:8080/loader.gif\", \"alt\", \"Loading...\"], [\"alt\", \"Training Image\", 3, \"src\"], [1, \"error-message\"]],\n  template: function TrainingsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n      i0.ɵɵtext(2, \" S\\u00E9lectionnez des cours.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 1);\n      i0.ɵɵtemplate(4, TrainingsComponent_div_4_Template, 15, 6, \"div\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, TrainingsComponent_p_5_Template, 2, 1, \"p\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 0)(7, \"h2\");\n      i0.ɵɵtext(8, \"Ajouter un nouveau training\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"form\", 4, 5);\n      i0.ɵɵlistener(\"ngSubmit\", function TrainingsComponent_Template_form_ngSubmit_9_listener() {\n        return ctx.saveTraining();\n      });\n      i0.ɵɵelementStart(11, \"div\", 6)(12, \"label\", 7);\n      i0.ɵɵtext(13, \"Nom\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function TrainingsComponent_Template_input_ngModelChange_14_listener($event) {\n        return ctx.training.name = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"div\", 6)(16, \"label\", 9);\n      i0.ɵɵtext(17, \"Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"textarea\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function TrainingsComponent_Template_textarea_ngModelChange_18_listener($event) {\n        return ctx.training.description = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(19, \"div\", 6)(20, \"label\", 11);\n      i0.ɵɵtext(21, \"Prix\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"input\", 12);\n      i0.ɵɵlistener(\"ngModelChange\", function TrainingsComponent_Template_input_ngModelChange_22_listener($event) {\n        return ctx.training.price = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"div\", 6)(24, \"label\", 13);\n      i0.ɵɵtext(25, \"Quantit\\u00E9\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"input\", 14);\n      i0.ɵɵlistener(\"ngModelChange\", function TrainingsComponent_Template_input_ngModelChange_26_listener($event) {\n        return ctx.training.quantity = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(27, \"div\")(28, \"label\");\n      i0.ɵɵtext(29, \"Image:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"input\", 15);\n      i0.ɵɵlistener(\"change\", function TrainingsComponent_Template_input_change_30_listener($event) {\n        return ctx.onFileChange($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(31, \"button\", 16);\n      i0.ɵɵtext(32, \"Cr\\u00E9er\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.trainings);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.error);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.training.name);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.training.description);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.training.price);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.training.quantity);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Training","i0","TrainingsComponent","constructor","trainingService","ngOnInit","loadTrainings","getTrainings","subscribe","next","data","trainings","error","onFileChange","event","file","target","files","training","imagePath","saveTraining","postTraining","console","log","loading","resetForm","resetFormSave","reset","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\PazmanyC\\Desktop\\Api_Rest_Angular-&-SpringBoot\\ApiRestSpringBoot-Angular\\AngularApiRestTraining\\AngularTraining\\src\\app\\component\\trainings\\trainings.component.ts","C:\\Users\\PazmanyC\\Desktop\\Api_Rest_Angular-&-SpringBoot\\ApiRestSpringBoot-Angular\\AngularApiRestTraining\\AngularTraining\\src\\app\\component\\trainings\\trainings.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Training } from 'src/app/models/training';\nimport { TrainingService } from 'src/app/services/training/training.service';\n\n@Component({\n  selector: 'app-trainings',\n  templateUrl: './trainings.component.html',\n  styleUrls: ['./trainings.component.css'],\n})\nexport class TrainingsComponent implements OnInit {\n  @ViewChild('resetFormSave', { static: false }) resetFormSave: any;\n  trainings: Training[] = [];\n  training: Training = new Training();\n  error!: string;\n  loading: boolean = true;\n\n  constructor(private trainingService: TrainingService) {}\n\n  ngOnInit() {\n    this.loadTrainings();\n  }\n\n  loadTrainings(): void {\n    this.trainingService.getTrainings().subscribe({\n      next: (data: Training[]) => {\n        this.trainings = data;\n      },\n      error: (error) => {\n        this.error =\n          \"Une erreur s'est produite lors du chargement des articles. /n\" +\n          error;\n      },\n    });\n  }\n\n  onFileChange(event: any) {\n    const file = event.target.files[0];\n    this.training.imagePath = file;\n  }\n\n  saveTraining(): void {\n    this.trainingService.postTraining(this.training).subscribe({\n      next: () => {\n        console.log('Formation enregistrée avec succès');\n\n        // this.loadTrainings();\n        this.loading = false;\n        this.resetForm();\n\n        // Réinitialiser les champs\n      },\n      error: (error: string) => {\n        this.error =\n          \"Erreur lors de l'enregistrement de la formation. \\n\" + error;\n        this.loading = false;\n      },\n    });\n  }\n\n  /**\n   * Réinitialiser les champs du formulaire de création de cour.\n   */\n  resetForm(): void {\n    this.resetFormSave.reset();\n  }\n}\n","<div class=\"container\">\n    <h1> Sélectionnez des cours.</h1>\n  \n    <div class=\"row\">\n      <div class=\"col-md-4\"  *ngFor=\"let training of trainings\">\n        <div class=\"card mb-3\">\n            <img *ngIf=\"loading\" src=\"http://localhost:8080/loader.gif\" alt=\"Loading...\">\n            <img *ngIf=\"!loading\" [src]=\"'http://localhost:8080/' + training?.imagePath\" alt=\"Training Image\">\n            <!-- <img [src]=\"'http://localhost:8080/' + training.imagePath\" alt=\"Training Image\">  -->\n          \n          <div class=\"card-body\">\n            <h5 class=\"card-title\">Language : {{ training.name }}</h5>\n            <p class=\"card-text\">{{ training.description }}</p>\n            <p class=\"card-text\">Price: {{ training.price }}</p>\n            <p class=\"card-text\">Quantity: {{ training.quantity }}<button class=\"btn btn-primary float-end\">Ajouter</button></p>\n            \n          </div>\n        </div>\n      </div>\n    </div>\n    <p class=\"error-message\" *ngIf=\"error\">{{ error }}</p>\n  </div>\n  <div class=\"container\">\n    <h2>Ajouter un nouveau training</h2>\n    <form (ngSubmit)=\"saveTraining()\" #resetFormSave=\"ngForm\">\n      <div class=\"form-group\">\n        <label for=\"name\">Nom</label>\n        <input type=\"text\" class=\"form-control\" id=\"name\" placeholder=\"Nom\" [(ngModel)]=\"training.name\" name=\"name\" required>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"description\">Description</label>\n        <textarea class=\"form-control\" id=\"description\" placeholder=\"Description\" [(ngModel)]=\"training.description\" name=\"description\" required></textarea>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"price\">Prix</label>\n        <input type=\"number\" class=\"form-control\" id=\"price\" placeholder=\"Prix\" [(ngModel)]=\"training.price\" name=\"price\" required>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"quantity\">Quantité</label>\n        <input type=\"number\" class=\"form-control\" id=\"quantity\" placeholder=\"Quantité\" [(ngModel)]=\"training.quantity\" name=\"quantity\" required>\n      </div>\n      <div>\n        <label>Image:</label>\n        <input type=\"file\" (change)=\"onFileChange($event)\">\n      </div>\n      <button type=\"submit\" class=\"btn btn-primary\">Créer</button>\n    </form>\n  </div>\n  \n  \n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}