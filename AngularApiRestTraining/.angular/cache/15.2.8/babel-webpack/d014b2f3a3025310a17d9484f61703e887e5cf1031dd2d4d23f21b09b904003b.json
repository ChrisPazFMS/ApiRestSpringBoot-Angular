{"ast":null,"code":"import { Training } from 'src/app/models/training';\nimport { throwError, catchError, tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/training/training.service\";\nimport * as i2 from \"src/app/services/error/error-handling.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = [\"resetFormSave\"];\nfunction TrainingsComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"div\", 18);\n    i0.ɵɵelement(2, \"img\", 19);\n    i0.ɵɵelementStart(3, \"div\", 20)(4, \"h5\", 21);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 22);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 22);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\", 22);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementStart(12, \"button\", 23);\n    i0.ɵɵtext(13, \"Ajouter\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const training_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", \"http://localhost:8080/\" + training_r3.imagePath, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Language : \", training_r3.name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(training_r3.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Price: \", training_r3.price, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Quantity: \", training_r3.quantity, \"\");\n  }\n}\nfunction TrainingsComponent_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.error);\n  }\n}\nexport class TrainingsComponent {\n  constructor(trainingService, errorHandlingService) {\n    this.trainingService = trainingService;\n    this.errorHandlingService = errorHandlingService;\n    this.trainings = [];\n    this.training = new Training();\n  }\n  ngOnInit() {\n    this.showTrainings();\n  }\n  showTrainings() {\n    this.trainingService.getTrainings().subscribe({\n      next: data => {\n        this.trainings = data;\n      },\n      error: error => {\n        this.error = \"Une erreur s'est produite lors du chargement des articles. /n\" + error;\n      }\n    });\n  }\n  onFileChange(event) {\n    const file = event.target.files[0];\n    this.training.imagePath = file;\n  }\n  saveTraining() {\n    return this.trainingService.postTraining(this.training).pipe(tap(() => {\n      console.log('Formation enregistrée avec succès');\n      this.showTrainings();\n      // Réinitialiser les champs\n      this.resetForm();\n    }), catchError(error => {\n      // Gérez l'erreur ici en fonction de vos besoins\n      this.errorHandlingService.handleHttpError(error);\n      return throwError(new Error(\"Erreur lors de l'enregistrement de la formation. Veuillez réessayer plus tard.\"));\n    }));\n  }\n  // saveTraining(): void {\n  //   this.trainingService.postTraining(this.training).subscribe({\n  //     next: () => {\n  //       console.log('Formation enregistrée avec succès');\n  //       this.showTrainings();\n  //       // Réinitialiser les champs\n  //       this.resetForm();\n  //     },\n  //     error: (error: string) => {\n  //       this.error =\n  //         \"Erreur lors de l'enregistrement de la formation. \\n\" + error;\n  //     },\n  //   });\n  // }\n  /**\r\n   * Réinitialiser les champs du formulaire de création de cour.\r\n   */\n  resetForm() {\n    this.resetFormSave.reset();\n  }\n}\nTrainingsComponent.ɵfac = function TrainingsComponent_Factory(t) {\n  return new (t || TrainingsComponent)(i0.ɵɵdirectiveInject(i1.TrainingService), i0.ɵɵdirectiveInject(i2.ErrorHandlingService));\n};\nTrainingsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TrainingsComponent,\n  selectors: [[\"app-trainings\"]],\n  viewQuery: function TrainingsComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.resetFormSave = _t.first);\n    }\n  },\n  decls: 33,\n  vars: 6,\n  consts: [[1, \"container\"], [1, \"row\"], [\"class\", \"col-md-4\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"error-message\", 4, \"ngIf\"], [3, \"ngSubmit\"], [\"resetFormSave\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"name\", \"placeholder\", \"Nom\", \"name\", \"name\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"description\"], [\"id\", \"description\", \"placeholder\", \"Description\", \"name\", \"description\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"price\"], [\"type\", \"number\", \"id\", \"price\", \"placeholder\", \"Prix\", \"name\", \"price\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"quantity\"], [\"type\", \"number\", \"id\", \"quantity\", \"placeholder\", \"Quantit\\u00E9\", \"name\", \"quantity\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"file\", 3, \"change\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [1, \"col-md-4\"], [1, \"card\", \"mb-3\"], [\"alt\", \"Training Image\", 3, \"src\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [1, \"btn\", \"btn-primary\", \"float-end\"], [1, \"error-message\"]],\n  template: function TrainingsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n      i0.ɵɵtext(2, \" S\\u00E9lectionnez des cours.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 1);\n      i0.ɵɵtemplate(4, TrainingsComponent_div_4_Template, 14, 5, \"div\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, TrainingsComponent_p_5_Template, 2, 1, \"p\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 0)(7, \"h2\");\n      i0.ɵɵtext(8, \"Ajouter un nouveau training\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"form\", 4, 5);\n      i0.ɵɵlistener(\"ngSubmit\", function TrainingsComponent_Template_form_ngSubmit_9_listener() {\n        return ctx.saveTraining();\n      });\n      i0.ɵɵelementStart(11, \"div\", 6)(12, \"label\", 7);\n      i0.ɵɵtext(13, \"Nom\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function TrainingsComponent_Template_input_ngModelChange_14_listener($event) {\n        return ctx.training.name = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"div\", 6)(16, \"label\", 9);\n      i0.ɵɵtext(17, \"Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"textarea\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function TrainingsComponent_Template_textarea_ngModelChange_18_listener($event) {\n        return ctx.training.description = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(19, \"div\", 6)(20, \"label\", 11);\n      i0.ɵɵtext(21, \"Prix\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"input\", 12);\n      i0.ɵɵlistener(\"ngModelChange\", function TrainingsComponent_Template_input_ngModelChange_22_listener($event) {\n        return ctx.training.price = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"div\", 6)(24, \"label\", 13);\n      i0.ɵɵtext(25, \"Quantit\\u00E9\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"input\", 14);\n      i0.ɵɵlistener(\"ngModelChange\", function TrainingsComponent_Template_input_ngModelChange_26_listener($event) {\n        return ctx.training.quantity = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(27, \"div\")(28, \"label\");\n      i0.ɵɵtext(29, \"Image:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"input\", 15);\n      i0.ɵɵlistener(\"change\", function TrainingsComponent_Template_input_change_30_listener($event) {\n        return ctx.onFileChange($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(31, \"button\", 16);\n      i0.ɵɵtext(32, \"Cr\\u00E9er\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.trainings);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.error);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.training.name);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.training.description);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.training.price);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.training.quantity);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,QAAQ,QAAQ,yBAAyB;AAGlD,SAAqBC,UAAU,EAAEC,UAAU,EAAEC,GAAG,QAAQ,MAAM;;;;;;;;;ICAxDC,+BAA0D;IAEpDA,0BAAgF;IAElFA,+BAAuB;IACEA,YAA8B;IAAAA,iBAAK;IAC1DA,6BAAqB;IAAAA,YAA0B;IAAAA,iBAAI;IACnDA,6BAAqB;IAAAA,YAA2B;IAAAA,iBAAI;IACpDA,8BAAqB;IAAAA,aAAiC;IAAAA,mCAA0C;IAAAA,wBAAO;IAAAA,iBAAS;;;;IAN3GA,eAAqD;IAArDA,wFAAqD;IAGnCA,eAA8B;IAA9BA,0DAA8B;IAChCA,eAA0B;IAA1BA,6CAA0B;IAC1BA,eAA2B;IAA3BA,uDAA2B;IAC3BA,eAAiC;IAAjCA,6DAAiC;;;;;IAM9DA,6BAAuC;IAAAA,YAAW;IAAAA,iBAAI;;;;IAAfA,eAAW;IAAXA,kCAAW;;;ADPtD,OAAM,MAAOC,kBAAkB;EAM7BC,YACUC,eAAgC,EAChCC,oBAA0C;IAD1C,oBAAe,GAAfD,eAAe;IACf,yBAAoB,GAApBC,oBAAoB;IAN9B,cAAS,GAAe,EAAE;IAC1B,aAAQ,GAAa,IAAIR,QAAQ,EAAE;EAMhC;EAEHS,QAAQ;IACN,IAAI,CAACC,aAAa,EAAE;EACtB;EAEAA,aAAa;IACX,IAAI,CAACH,eAAe,CAACI,YAAY,EAAE,CAACC,SAAS,CAAC;MAC5CC,IAAI,EAAGC,IAAgB,IAAI;QACzB,IAAI,CAACC,SAAS,GAAGD,IAAI;MACvB,CAAC;MACDE,KAAK,EAAGA,KAAK,IAAI;QACf,IAAI,CAACA,KAAK,GACR,+DAA+D,GAC/DA,KAAK;MACT;KACD,CAAC;EACJ;EAEAC,YAAY,CAACC,KAAU;IACrB,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAClC,IAAI,CAACC,QAAQ,CAACC,SAAS,GAAGJ,IAAI;EAChC;EAEAK,YAAY;IACV,OAAO,IAAI,CAACjB,eAAe,CAACkB,YAAY,CAAC,IAAI,CAACH,QAAQ,CAAC,CAACI,IAAI,CAC1DvB,GAAG,CAAC,MAAW;MACbwB,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC;MAChD,IAAI,CAAClB,aAAa,EAAE;MACpB;MACA,IAAI,CAACmB,SAAS,EAAE;IAClB,CAAC,CAAC,EACF3B,UAAU,CAAEc,KAAU,IAAI;MACxB;MACA,IAAI,CAACR,oBAAoB,CAACsB,eAAe,CAACd,KAAK,CAAC;MAChD,OAAOf,UAAU,CACf,IAAI8B,KAAK,CACP,gFAAgF,CACjF,CACF;IACH,CAAC,CAAC,CACH;EACH;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;;;EAGAF,SAAS;IACP,IAAI,CAACG,aAAa,CAACC,KAAK,EAAE;EAC5B;;AAzEW5B,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;QAAlBA,kBAAkB;EAAA6B;EAAAC;IAAA;;;;;;;;;;;;;MCX/B/B,8BAAuB;MACdA,6CAAuB;MAAAA,iBAAK;MAEjCA,8BAAiB;MACfA,oEAYM;MACRA,iBAAM;MACNA,+DAAsD;MACxDA,iBAAM;MACNA,8BAAuB;MACjBA,2CAA2B;MAAAA,iBAAK;MACpCA,kCAA0D;MAApDA;QAAA,OAAYgC,kBAAc;MAAA,EAAC;MAC/BhC,+BAAwB;MACJA,oBAAG;MAAAA,iBAAQ;MAC7BA,iCAAqH;MAAjDA;QAAA;MAAA,EAA2B;MAA/FA,iBAAqH;MAEvHA,+BAAwB;MACGA,4BAAW;MAAAA,iBAAQ;MAC5CA,qCAAyI;MAA/DA;QAAA;MAAA,EAAkC;MAA6BA,iBAAW;MAEtJA,+BAAwB;MACHA,qBAAI;MAAAA,iBAAQ;MAC/BA,kCAA2H;MAAnDA;QAAA;MAAA,EAA4B;MAApGA,iBAA2H;MAE7HA,+BAAwB;MACAA,8BAAQ;MAAAA,iBAAQ;MACtCA,kCAAwI;MAAzDA;QAAA;MAAA,EAA+B;MAA9GA,iBAAwI;MAE1IA,4BAAK;MACIA,uBAAM;MAAAA,iBAAQ;MACrBA,kCAAmD;MAAhCA;QAAA,OAAUgC,wBAAoB;MAAA,EAAC;MAAlDhC,iBAAmD;MAErDA,mCAA8C;MAAAA,2BAAK;MAAAA,iBAAS;;;MAvChBA,eAAY;MAAZA,uCAAY;MAchCA,eAAW;MAAXA,gCAAW;MAOmCA,eAA2B;MAA3BA,2CAA2B;MAIrBA,eAAkC;MAAlCA,kDAAkC;MAIpCA,eAA4B;MAA5BA,4CAA4B;MAIrBA,eAA+B;MAA/BA,+CAA+B","names":["Training","throwError","catchError","tap","i0","TrainingsComponent","constructor","trainingService","errorHandlingService","ngOnInit","showTrainings","getTrainings","subscribe","next","data","trainings","error","onFileChange","event","file","target","files","training","imagePath","saveTraining","postTraining","pipe","console","log","resetForm","handleHttpError","Error","resetFormSave","reset","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\PazmanyC\\Desktop\\Api_Rest_Angular-&-SpringBoot\\ApiRestSpringBoot-Angular\\AngularApiRestTraining\\AngularTraining\\src\\app\\component\\trainings\\trainings.component.ts","C:\\Users\\PazmanyC\\Desktop\\Api_Rest_Angular-&-SpringBoot\\ApiRestSpringBoot-Angular\\AngularApiRestTraining\\AngularTraining\\src\\app\\component\\trainings\\trainings.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Training } from 'src/app/models/training';\nimport { ErrorHandlingService } from 'src/app/services/error/error-handling.service';\nimport { TrainingService } from 'src/app/services/training/training.service';\nimport { Observable, throwError, catchError, tap } from 'rxjs';\n\n@Component({\n  selector: 'app-trainings',\n  templateUrl: './trainings.component.html',\n  styleUrls: ['./trainings.component.css'],\n})\nexport class TrainingsComponent implements OnInit {\n  @ViewChild('resetFormSave', { static: false }) resetFormSave: any;\n  trainings: Training[] = [];\n  training: Training = new Training();\n  error!: string;\n\n  constructor(\n    private trainingService: TrainingService,\n    private errorHandlingService: ErrorHandlingService\n  ) {}\n\n  ngOnInit() {\n    this.showTrainings();\n  }\n\n  showTrainings(): void {\n    this.trainingService.getTrainings().subscribe({\n      next: (data: Training[]) => {\n        this.trainings = data;\n      },\n      error: (error) => {\n        this.error =\n          \"Une erreur s'est produite lors du chargement des articles. /n\" +\n          error;\n      },\n    });\n  }\n\n  onFileChange(event: any) {\n    const file = event.target.files[0];\n    this.training.imagePath = file;\n  }\n\n  saveTraining(): Observable<Training> {\n    return this.trainingService.postTraining(this.training).pipe(\n      tap((): void => {\n        console.log('Formation enregistrée avec succès');\n        this.showTrainings();\n        // Réinitialiser les champs\n        this.resetForm();\n      }),\n      catchError((error: any) => {\n        // Gérez l'erreur ici en fonction de vos besoins\n        this.errorHandlingService.handleHttpError(error);\n        return throwError(\n          new Error(\n            \"Erreur lors de l'enregistrement de la formation. Veuillez réessayer plus tard.\"\n          )\n        );\n      })\n    );\n  }\n\n  // saveTraining(): void {\n  //   this.trainingService.postTraining(this.training).subscribe({\n  //     next: () => {\n  //       console.log('Formation enregistrée avec succès');\n  //       this.showTrainings();\n  //       // Réinitialiser les champs\n  //       this.resetForm();\n  //     },\n  //     error: (error: string) => {\n  //       this.error =\n  //         \"Erreur lors de l'enregistrement de la formation. \\n\" + error;\n  //     },\n  //   });\n  // }\n\n  /**\n   * Réinitialiser les champs du formulaire de création de cour.\n   */\n  resetForm(): void {\n    this.resetFormSave.reset();\n  }\n}\n","<div class=\"container\">\n    <h1> Sélectionnez des cours.</h1>\n  \n    <div class=\"row\">\n      <div class=\"col-md-4\"  *ngFor=\"let training of trainings\">\n        <div class=\"card mb-3\">\n            <img [src]=\"'http://localhost:8080/' + training.imagePath\" alt=\"Training Image\"> \n          \n          <div class=\"card-body\">\n            <h5 class=\"card-title\">Language : {{ training.name }}</h5>\n            <p class=\"card-text\">{{ training.description }}</p>\n            <p class=\"card-text\">Price: {{ training.price }}</p>\n            <p class=\"card-text\">Quantity: {{ training.quantity }}<button class=\"btn btn-primary float-end\">Ajouter</button></p>\n            \n          </div>\n        </div>\n      </div>\n    </div>\n    <p class=\"error-message\" *ngIf=\"error\">{{ error }}</p>\n  </div>\n  <div class=\"container\">\n    <h2>Ajouter un nouveau training</h2>\n    <form (ngSubmit)=\"saveTraining()\" #resetFormSave=\"ngForm\">\n      <div class=\"form-group\">\n        <label for=\"name\">Nom</label>\n        <input type=\"text\" class=\"form-control\" id=\"name\" placeholder=\"Nom\" [(ngModel)]=\"training.name\" name=\"name\" required>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"description\">Description</label>\n        <textarea class=\"form-control\" id=\"description\" placeholder=\"Description\" [(ngModel)]=\"training.description\" name=\"description\" required></textarea>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"price\">Prix</label>\n        <input type=\"number\" class=\"form-control\" id=\"price\" placeholder=\"Prix\" [(ngModel)]=\"training.price\" name=\"price\" required>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"quantity\">Quantité</label>\n        <input type=\"number\" class=\"form-control\" id=\"quantity\" placeholder=\"Quantité\" [(ngModel)]=\"training.quantity\" name=\"quantity\" required>\n      </div>\n      <div>\n        <label>Image:</label>\n        <input type=\"file\" (change)=\"onFileChange($event)\">\n      </div>\n      <button type=\"submit\" class=\"btn btn-primary\">Créer</button>\n    </form>\n  </div>\n  \n  \n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}